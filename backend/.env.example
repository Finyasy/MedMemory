DEBUG=true
DATABASE_URL=postgresql+asyncpg://medmemory:medmemory_dev@localhost:5432/medmemory
JWT_SECRET_KEY=replace-with-a-long-random-secret

# LLM model/runtime
LLM_MODEL=google/medgemma-1.5-4b-it
LLM_MODEL_PATH=models/medgemma-1.5-4b-it
LLM_QUANTIZE_4BIT=false
LLM_USE_MLX=true
LLM_MLX_QUANTIZED_MODEL_PATH=
LLM_MLX_QUANTIZATION_BITS=4
HF_TOKEN=hf_your_token_here
HF_HUB_OFFLINE=1
TRANSFORMERS_OFFLINE=1

# Deterministic + grounding-safe defaults
LLM_DO_SAMPLE=false
LLM_TEMPERATURE=0.0
LLM_TOP_P=0.8
LLM_TOP_K=40
LLM_REPETITION_PENALTY=1.1
LLM_PROMPT_PROFILE=warm_concise_v1
LLM_MAX_NEW_TOKENS=256
LLM_STRICT_GROUNDING=true
LLM_MIN_RELEVANCE_SCORE=0.45
LLM_LOW_CONFIDENCE_FLOOR=0.2
LLM_ALLOW_WEAK_FALLBACK=false
LLM_REQUIRE_NUMERIC_CITATIONS=false
LLM_ENABLE_SELF_CORRECTION=true
LLM_REASONING_TEMPERATURE=0.2
LLM_REASONING_TOP_P=0.85
LLM_RERANK_ENABLED=true
LLM_RERANK_MODEL=BAAI/bge-reranker-v2-m3
LLM_RERANK_CANDIDATES=20
LLM_RERANK_TOP_K=3
LLM_RERANK_MIN_SCORE=0.2

# Password reset email (SMTP) - optional
FRONTEND_BASE_URL=http://localhost:5173
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-user@example.com
SMTP_PASSWORD=replace-with-app-password
SMTP_FROM=noreply@example.com
SMTP_USE_TLS=true

# Live provider sync (FHIR) for Kenya data sources
PROVIDER_SYNC_LIVE_ENABLED=true
PROVIDER_SYNC_LIVE_FALLBACK_TO_LOCAL_SCAN=true
PROVIDER_SYNC_LIVE_TIMEOUT_SECONDS=30
PROVIDER_SYNC_LIVE_VERIFY_SSL=true
PROVIDER_SYNC_LIVE_PAGE_SIZE=200
PROVIDER_SYNC_LIVE_MAX_PAGES_PER_RESOURCE=20
# Optional FHIR identifier system for Patient search (system|value)
PROVIDER_SYNC_LIVE_PATIENT_IDENTIFIER_SYSTEM=

# Provider base URLs keyed by provider slug/alias
PROVIDER_SYNC_LIVE_BASE_URLS={"digital_health_agency_dha":"https://<dha-fhir-base>","national_shr_afyayangu":"https://<shr-fhir-base>","kenya_health_information_system_khis":"https://<khis-fhir-base>","integrated_health_information_system_ihis_hie":"https://<ihis-hie-fhir-base>","moh_data_warehouse_dwh_dwapi":"https://<dwh-dwapi-fhir-base>","afyarekod":"https://<afyarekod-fhir-base>","medbook_aphiaone_hmis":"https://<medbook-fhir-base>","ruphasoft":"https://<ruphasoft-fhir-base>","ksatria_his":"https://<ksatria-fhir-base>","dawascope":"https://<dawascope-fhir-base>","kehmis_interoperability_layer":"https://<kehmis-fhir-base>","shield_surveillance_linkage":"https://<shield-fhir-base>","kemsa_lmis":"https://<kemsa-fhir-base>","kenya_master_health_facility_list_kmhfl":"https://<kmhfl-fhir-base>"}

# Bearer tokens keyed by provider slug/alias
PROVIDER_SYNC_LIVE_BEARER_TOKENS={"digital_health_agency_dha":"<dha-bearer-token>","national_shr_afyayangu":"<shr-bearer-token>","kenya_health_information_system_khis":"<khis-bearer-token>","integrated_health_information_system_ihis_hie":"<ihis-hie-bearer-token>","moh_data_warehouse_dwh_dwapi":"<dwh-dwapi-bearer-token>","afyarekod":"<afyarekod-bearer-token>","medbook_aphiaone_hmis":"<medbook-bearer-token>","ruphasoft":"<ruphasoft-bearer-token>","ksatria_his":"<ksatria-bearer-token>","dawascope":"<dawascope-bearer-token>","kehmis_interoperability_layer":"<kehmis-bearer-token>","shield_surveillance_linkage":"<shield-bearer-token>","kemsa_lmis":"<kemsa-bearer-token>","kenya_master_health_facility_list_kmhfl":"<kmhfl-bearer-token>"}

# API keys keyed by provider slug/alias (used as X-API-Key when required)
PROVIDER_SYNC_LIVE_API_KEYS={"digital_health_agency_dha":"<dha-api-key>","national_shr_afyayangu":"<shr-api-key>","kenya_health_information_system_khis":"<khis-api-key>","integrated_health_information_system_ihis_hie":"<ihis-hie-api-key>","moh_data_warehouse_dwh_dwapi":"<dwh-dwapi-api-key>","afyarekod":"<afyarekod-api-key>","medbook_aphiaone_hmis":"<medbook-api-key>","ruphasoft":"<ruphasoft-api-key>","ksatria_his":"<ksatria-api-key>","dawascope":"<dawascope-api-key>","kehmis_interoperability_layer":"<kehmis-api-key>","shield_surveillance_linkage":"<shield-api-key>","kemsa_lmis":"<kemsa-api-key>","kenya_master_health_facility_list_kmhfl":"<kmhfl-api-key>"}
